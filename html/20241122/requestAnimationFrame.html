<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>requestAnimationFrame</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      cursor: none;
    }

    .emoji {
      background-color: rgba(254, 236, 55, 0.6);
      box-shadow: 0 0 10px rgba(243, 198, 35, 0.7), 0 0 20px rgba(235, 131, 23, 0.9);
      padding: 4px;
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 2rem;
      pointer-events: none;
      border-radius: 50%;

      will-change: transform;
      /* 
        will-change: cssë¡œ ì›¹ì‚¬ì´íŠ¸ ì„±ëŠ¥ í–¥ìƒ 
        -> ì‹¤ì œë¡œ ìš”êµ¬í•˜ê¸° ì „ì— ë¯¸ë¦¬ ì¤€ë¹„í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì—ê²Œ ì•Œë¦¼.
        -> auto; ê¸°ë³¸ê°’
        -> scroll-position; ìŠ¤í¬ë¡¤ì˜ ìœ„ì¹˜ë¥¼ ë°”ê¿€ ë•Œ(ex. ì„¸ë¡œ>ê°€ë¡œ)
        contents; ì»¨í…ì¸  ë°”ê¿ˆ
        ê·¸ ì™¸  css ì†ì„± ì‚¬ìš© ê°€ëŠ¥

        transform; ë§ˆìš°ìŠ¤ ìœ„ì¹˜ ì´ë™í•  ë•Œ ëœ ë²„ë²…ê±°ë¦¬ë¼ê³ ? 

        https://developer.mozilla.org/en-US/docs/Web/CSS/will-change
      */
    }
  </style>
</head>
<body>
  <h1>window.requestAnimationFrame()</h1>
  <h2>ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„</h2>
  <p>ë¹„ë™ê¸° í•¨ìˆ˜</p>
  <a href="https://developer.mozilla.org/ko/docs/Web/API/window/requestAnimationFrame" target="_blank">MDN</a>

  <div class="emoji">ğŸ†</div>

  <script>
    /* 
      requestAnimationFrame(ì½œë°±í•¨ìˆ˜)
        ã„´ ì½œë°±í•¨ìˆ˜ : ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        ã„´ ë°˜í™˜ê°’ : ìš”ì²­ idì¸ long ì •ìˆ˜ ê°’(0ì´ ì•„ë‹Œ ê°’)
    */

    const emoji = document.querySelector('.emoji');

    // ë§ˆìš°ìŠ¤ ì»¤ì„œ ì¢Œí‘œ
    let mouseX = 0;
    let mouseY = 0;

    // $(window).on('mousemove', function() {});
    addEventListener('mousemove', (e) => {
      mouseX = e.clientX - 40;
      mouseY = e.clientY - 40;
      // console.log(mouseX, mouseY);
    });

    // ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ë”°ë¼ë‹¤ë‹ˆëŠ” ì´ëª¨ì§€ ì¢Œí‘œ
    let emojiX = 0;
    let emojiY = 0;

    const emojiMov = () => {
      requestAnimationFrame(emojiMov);// ì¬ê·€í•¨ìˆ˜ì˜ í˜•íƒœ. ì—°ì† í˜¸ì¶œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—. ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„. ì„±ëŠ¥ ìµœì í™”

      // ì‹œê°„ì°¨ë¥¼ ë‘ê³  ë”°ë¼ë‹¤ë‹˜
      emojiX += (mouseX - emojiX) * 0.15;
      emojiY += (mouseY - emojiY) * 0.15;

      emoji.style.transform = `translate(${emojiX}px, ${emojiY}px)`;
    }

    emojiMov();
  </script>
</body>

</html>